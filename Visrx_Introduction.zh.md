# VisRx 介绍

这是一份关于 VisRx 的 Markdown 介绍。我在原项目完成两年后，把它整理到网站上，既用于回顾 OG 时代，也作为作品集展示。重建网站所需的文字与多媒体资源从这里开始。

## 背景

### 我们的观察

1. 老年人服药难，让其“正确服药”更难。随着记忆、执行与理解能力下降，遵循用药变得越来越困难。
2. 仅靠老人自己正确理解与准确服用药物并不现实。作为监护人的子女/家人，在用药支持与沟通上缺乏有效工具。

### 我们的解决方案

我们希望打通“老人 ↔ 监护人”之间完成服药这一任务的全流程，提供面向用药场景的一体化解决方案。

## VisRx

### 界面

由于存在两个角色，App 会根据不同用户展示不同界面：

- 老人端：自适应的超大字体。首页生成当日服用概况并语音播报，可快速进入 AR 服用指导。
- 监护人端：扫描药品说明书自动分析并快速添加，提供更完整的管理视图。

### 主要功能

1. 一键导入药品信息
   - 智能导入：使用相机 OCR 识别文字，结合 HealthKit 基本信息，并接入大语言模型自动解析药品说明书，免去繁琐的手动录入。
2. AR 辅助老人服药
   - 一种新的无障碍交互方式。依托 SceneKit 与机器学习模型，老人能以手势与药品“交互”，听到针对性的服用细则。
3. AR 服用指导 + LLM 问答
   - 用手指向药品并直接提问，立刻获得个性化解答，让“药品”真正“活起来”。
4. 双端登录/绑定与家庭共享
   - 同步药品、提醒与历史。监护人添加药品后，老人手机即可获得最新信息；监护人也能及时查看服药历史。
5. 概览
   - 跨两端的关键流程与界面一览。

### 核心技术与实现细节

VisRx 并不仅仅是一个简单的 GPT 套壳应用。在 2023 年初，多模态大模型（如 GPT-4V）尚未普及且 API 成本高昂、延迟极高。为了在移动端实现实时的“指哪问哪”体验，我设计了一套基于端云协同（Edge-Cloud Collaboration）的异构流水线架构。

1. 端侧计算卸载与轻量化感知 (On-device Compute Offload) 为了解决视频流上传带来的高延迟与隐私问题，我们将视觉感知任务完全卸载至端侧（iPhone NPU/GPU）：
   - 视觉与手势追踪：利用 CoreML 和 Vision Framework (VNDetectHumanHandPoseRequest) 在本地实时进行手势关节点提取与物体检测，而非上传视频帧。
   - 3D 空间对齐：通过 ARKit 的 ARWorldTrackingConfiguration 构建世界坐标系，结合光线投射算法（Ray-casting / HitTest），在端侧毫秒级地解算“食指指尖”与“虚拟药品锚点（AnchorEntity）”的空间关系。
2. 创新点：多模态语义序列化 (Multimodal Semantic Serialization) 这是本系统的核心创新。大语言模型无法直接理解 3D 坐标或视频流，我们设计了一种基于 XML 的多模态图结构（XML Prompt Engineering），将非结构化的多模态数据转化为结构化的语义图：
   - 数据结构化：系统将 OCR 识别的药品信息、HealthKit 的用户健康记录、以及端侧解算出的“手势指向交互事件”，动态封装为 XML 节点（如 <druginfo>, <gesture type="pointing">, <userquery>）。
   - 语义映射：通过这种序列化处理，我们将原本数兆字节的视频流请求，压缩为几百字节的结构化文本 Prompt。这不仅让当时的 LLM 能够理解“我指的这个药（This）”具体指代什么，还将网络传输带宽降低了三个数量级。
3. 隐私优先的混合架构 得益于上述架构，敏感的视觉数据（如家庭环境视频流）从未离开用户设备。仅有经过脱敏和序列化后的文本特征（Features）被发送至云端推理。这种设计在保证了医疗场景隐私安全的同时，实现了在弱网环境下依然流畅的端到端（E2E）响应速度。

## 结语

我主导并开发了 VisRx（药忆），该移动应用在 2023 年中国高校计算机大赛 —— 移动应用创新赛（浙江大学与 Apple 联合主办）全国总决赛中获得一等奖。

作为队长，我带领跨学科团队，拿下北邮在该项赛事中的首个全国冠军（参赛团队 2800+，覆盖 891 所高校）。

在 2023 年初，我独立实现了基于 ARKit 的空间感知系统，并率先将 ARKit 与大语言模型结合以增强空间理解能力。即便在当时 GPT‑3.5 仍以弱多模态能力为主流模型，我们依然有效地让 LLM 处理真实世界语境。

项目服务于医疗与认知辅助场景，体现出跨学科创新与真实场景落地价值。

感谢队友 @zhs852 的努力与支持，没有他我无法完成这一切。

## 设计资源

- 背景色：#E9EEED —— 冷调浅蓝灰，沉静可靠
- 主色：#F08876 / #FEB27F —— 温暖珊瑚色，亲切友好
- 品牌：包含 VisRx 图标动画的视频（3024×1702，mp4）
